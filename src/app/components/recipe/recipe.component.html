<jw-modal id="pref-modal">
  <h3>{{prefUser.name}}'s Preferences</h3>
  <p>Which ingredients do you not eat?</p>
  <form>
    <mat-form-field>
      <mat-select multiple placeholder="Ingredients" [(value)]="selectedIngredients">
        <mat-option *ngFor="let ingredient of ingredientList" [(value)]="ingredient">{{ingredient.name}}</mat-option>
      </mat-select>
    </mat-form-field>
    <button mat-button (click)="savePreferences()">Save</button>
  </form>
</jw-modal>

<jw-modal id="add-participant-modal">
  <h3>Add Participant</h3>
  <form>
    <table>
      <tr>
        <mat-button-toggle-group [(value)]="selectedUserType">
          <mat-button-toggle value="existing">Existing</mat-button-toggle>
          <mat-button-toggle value="new">New</mat-button-toggle>
        </mat-button-toggle-group>
      </tr>
      <tr>
        <mat-form-field *ngIf="selectedUserType == 'existing'">
          <mat-select placeholder="person" [(value)]="selectedUser">
            <mat-option *ngFor="let person of personList" [(value)]="person">{{person.name}}</mat-option>
          </mat-select>
        </mat-form-field>
        <mat-form-field *ngIf="selectedUserType == 'new'">
          <input name="name" [formControl]="nameFormControl" matInput value="{{userNameInput}}" placeholder="Name">
        </mat-form-field>
      </tr>
      <tr>
        <button mat-button (click)="addParticipant()">Save</button>
      </tr>
    </table>
  </form>
</jw-modal>

<div class="container">

  <div class="flex-item sidebar">
    <h2 class="title">{{meal.date | date}}</h2>
    <h2 class="header">Participants</h2>

    <ul class="list">
      <li class="list-box" *ngFor="let person of meal.participants">
        <div class="person-top">
          <span class="header-small">{{person.name}}</span>
          <button class="button right" (click)="updateUsers(person)"><i class="material-icons md-18 right">delete</i></button>
          <button class="button right" (click)="edit(person)"><i class="material-icons md-18 right">create</i></button>
        </div>
        <div class="person-bottom" *ngIf="person.foodRestrictions.length > 0">
          <span class="header-small">Limits</span>
          <ul class="limit-list">
            <li *ngFor="let restriction of person.foodRestrictions" class="item_grid-container">
              <span>{{restriction.name}} </span>
            </li>
          </ul>
        </div>
      </li>
      <button class="button button-wide" (click)="addPersonModal(person)">Add Participant</button>
    </ul>

  </div>

  <div class="flex-item sidebar">
    <h2 class="title">{{meal.recipe.name}}</h2>
    <h2 class="header">Ingredients</h2>

    <div class="list-box">
      <ul class="limit-list" *ngIf="meal.recipe.ingredients.length > 0">
        <li class="item_grid-container" *ngFor="let ingredient of meal.recipe.ingredients" title="{{ingredient.amount}} {{ingredient.unit}} {{ingredient.name}}">
          <span>{{ingredient.name}} </span> <span> {{ingredient.amount}} {{ingredient.unit}}</span>
        </li>
      </ul>
    </div>
    <button class="button button-wide">Add Ingredient</button>

  </div>

  <div class="flex-item">
    <h2 class="title">Preparation</h2>
    <div class="preparation-box">
      <h3>{{meal.recipe.name}}</h3>
      <p>{{meal.recipe.description}}</p>
    </div>
    <div class="button_grid-container">
      <button class="button button-wide">Edit Recipe</button>
      <button class="button button-wide">New Recipe</button>
    </div>
  </div>
</div>